<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Pediatric Genetic WES Risk Calculator</title>
  <style>
    body {
      font-family: Arial;
      max-width: 600px;
      margin: auto;
      padding: 20px;
    }
    input, select {
      width: 100%;
      padding: 10px;
      margin: 5px 0 15px;
    }
    .result {
      margin-top: 20px;
      font-size: 1.2em;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h2>Pediatric Genetic WES Risk Calculator</h2>
  <p>Estimate the likelihood of a positive WES diagnosis using clinical features.</p>

  <form id="riskForm">
    <label for="ageOnset">Age at Onset:</label>
    <input type="number" id="ageOnset" name="ageOnset" required>

    <label for="system">Multi-System Involvement (1=yes, 0=no):</label>
    <select id="system" name="system">
      <option value="1">Yes</option>
      <option value="0">No</option>
    </select>

    <label for="delay">Diagnostic Delay (months):</label>
    <input type="number" id="delay" name="delay" required>

    <label for="consang">Consanguinity (1=yes, 0=no):</label>
    <select id="consang" name="consang">
      <option value="1">Yes</option>
      <option value="0">No</option>
    </select>

    <button type="button" onclick="calculateRisk()">Calculate Risk</button>
  </form>

  <div class="result" id="result"></div>

  <script>
    function calculateRisk() {
      let age = parseFloat(document.getElementById("ageOnset").value);
      let system = parseInt(document.getElementById("system").value);
      let delay = parseFloat(document.getElementById("delay").value);
      let consang = parseInt(document.getElementById("consang").value);

      // Logistic regression model
      let logOdds = -1.52 + (0.27 * (age < 12 ? 1 : 0)) + (0.48 * system) + (0.31 * consang) + (0.15 * (delay > 6 ? 1 : 0));
      let probability = 1 / (1 + Math.exp(-logOdds));
      let percent = (probability * 100).toFixed(1);

      // Risk category
      let category = '';
      if (probability >= 0.65) category = 'High';
      else if (probability >= 0.40) category = 'Moderate';
      else category = 'Low';

      document.getElementById("result").innerHTML =
        `Estimated Risk: ${percent}%<br>Risk Category: <strong>${category}</strong>`;
    }
  </script>
</body>
</html>
