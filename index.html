<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WES Diagnostic Yield Risk Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      padding: 2rem;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background: #fff;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    h2 {
      text-align: center;
      margin-bottom: 1rem;
    }
    label {
      display: block;
      margin-top: 1rem;
    }
    input, select, button {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.5rem;
    }
    .result {
      margin-top: 2rem;
      font-weight: bold;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>WES Diagnostic Yield Risk Calculator</h2>
    <form id="riskForm">
      <label for="age">Age at Onset (in years):</label>
      <input type="number" id="age" step="0.1" required />

      <label for="syndromic">Syndromic Presentation:</label>
      <select id="syndromic">
        <option value="1">Yes</option>
        <option value="0">No</option>
      </select>

      <label for="delayed">Delayed Developmental Milestones:</label>
      <select id="delayed">
        <option value="1">Yes</option>
        <option value="0">No</option>
      </select>

      <label for="seizures">History of Seizures:</label>
      <select id="seizures">
        <option value="1">Yes</option>
        <option value="0">No</option>
      </select>

      <label for="positive">Family History of Genetic Disorder:</label>
      <select id="positive">
        <option value="1">Yes</option>
        <option value="0">No</option>
      </select>

      <label for="consang">Parental Consanguinity:</label>
      <select id="consang">
        <option value="1">Yes</option>
        <option value="0">No</option>
      </select>

      <button type="submit">Calculate Risk</button>
    </form>

    <div class="result" id="result"></div>
  </div>

  <script>
    // Logistic regression coefficients (example values â€” replace with your final model's coefficients)
    const coef = {
      intercept: -1.2,
      age: -0.15,
      syndromic: 1.1,
      delayed: 0.8,
      seizures: 0.7,
      positive: 0.6,
      consang: 0.9
    };

    function calculateProbability(inputs) {
      const linearSum =
        coef.intercept +
        coef.age * inputs.age +
        coef.syndromic * inputs.syndromic +
        coef.delayed * inputs.delayed +
        coef.seizures * inputs.seizures +
        coef.positive * inputs.positive +
        coef.consang * inputs.consang;
      const probability = 1 / (1 + Math.exp(-linearSum));
      return probability;
    }

    function getRiskCategory(probability) {
      if (probability >= 0.7) return "High Risk";
      else if (probability >= 0.4) return "Moderate Risk";
      else return "Low Risk";
    }

    document.getElementById("riskForm").addEventListener("submit", function (e) {
      e.preventDefault();
      const inputs = {
        age: parseFloat(document.getElementById("age").value),
        syndromic: parseInt(document.getElementById("syndromic").value),
        delayed: parseInt(document.getElementById("delayed").value),
        seizures: parseInt(document.getElementById("seizures").value),
        positive: parseInt(document.getElementById("positive").value),
        consang: parseInt(document.getElementById("consang").value)
      };

      const prob = calculateProbability(inputs);
      const category = getRiskCategory(prob);

      document.getElementById("result").innerText =
        `Predicted Diagnostic Yield: ${(prob * 100).toFixed(1)}%\nRisk Category: ${category}`;
    });
  </script>
</body>
</html>
